set -g default-shell /usr/bin/fish
set-option -ga terminal-overrides ",xterm-256color:Tc,"
set -g history-limit 100000
set -g mouse on

# Keyboard Shortcuts
# ------------------

# Make Shift-Page Up and Shift-Page Down scroll, as they normally would in
# Gnome Terminal. Note that once in copy mode just Page Up and Page Down on
# their own will scroll, you don't have to keep holding down Shift, but you can
# do if you want.
bind -n S-Pageup copy-mode -u
bind -n S-Pagedown send-keys Pagedown

# Browser-like tab (window) controls.
bind-key -n C-t new-window
bind-key -n C-PgDn next-window
bind-key -n C-PgUp previous-window
bind-key -n C-S-PgDn swap-window -t +1
bind-key -n C-S-PgUp swap-window -t -1
# TODO: Bind alt+1..8 to select tabs 1..8, and alt+9 to select the last tab,
# like in browsers.

# Use the function keys to jump to windows,
bind-key -n  F1 if-shell -F '#{==:#I,1}' 'last-window' 'select-window -t :1'
bind-key -n  F2 if-shell -F '#{==:#I,2}' 'last-window' 'select-window -t :2'
bind-key -n  F3 if-shell -F '#{==:#I,3}' 'last-window' 'select-window -t :3'
bind-key -n  F4 if-shell -F '#{==:#I,4}' 'last-window' 'select-window -t :4'
bind-key -n  F5 if-shell -F '#{==:#I,5}' 'last-window' 'select-window -t :5'
bind-key -n  F6 if-shell -F '#{==:#I,6}' 'last-window' 'select-window -t :6'
bind-key -n  F7 if-shell -F '#{==:#I,7}' 'last-window' 'select-window -t :7'
bind-key -n  F8 if-shell -F '#{==:#I,8}' 'last-window' 'select-window -t :8'
bind-key -n  F9 if-shell -F '#{==:#I,9}' 'last-window' 'select-window -t :9'
bind-key -n  F10 if-shell -F '#{==:#I,10}' 'last-window' 'select-window -t :10'
bind-key -n  F11 if-shell -F '#{==:#I,11}' 'last-window' 'select-window -t :11'
bind-key -n  F12 if-shell -F '#{==:#I,12}' 'last-window' 'select-window -t :12'
bind-key F1 send-keys F1
bind-key F2 send-keys F2
bind-key F3 send-keys F3
bind-key F4 send-keys F4
bind-key F5 send-keys F5
bind-key F6 send-keys F6
bind-key F7 send-keys F7
bind-key F8 send-keys F8
bind-key F9 send-keys F9
bind-key F10 send-keys F10
bind-key F11 send-keys F11
bind-key F12 send-keys F12

# Status Line
# -----------
set -g status-style "bg=default fg=#ffffff"
set -g status-left '' # Don't display the session name in the bottom left (status-left is "[#S] " by default).
set -g status-right '#{prefix_highlight}'
set -g window-status-current-style "bg=default fg=default,reverse"
set -g window-status-last-style "bg=#444444 fg=#ffffff"
set -g window-status-activity-style "bg=yellow fg=default"
set -g window-status-bell-style "bg=yellow fg=default"
set -g window-status-separator ''  # No spaces between windows.
set -g window-status-format "#{?window_start_flag,, }#I:#W#{?window_flags,#F, } "
set -g window-status-current-format "#{?window_start_flag,, }#I:#W#{?window_flags,#F, } "

# Window title
# ------------
set -g set-titles on
set -g set-titles-string 'tmux (#S)'
# Rename windows to the names of the commands currently running in them
# (but not if the window has been given a name manually).
set-window-option -g automatic-rename on
# Start numbering windows and panes at 1, not 0.
set -g base-index 1
set -g pane-base-index 1

# Copy and paste
# --------------
# Use vi-style keybindings in copy mode.
set-window-option -g mode-keys vi
# Don't clear the selection or exit copy mode when hitting Enter.
# Use Esc to clear the selection, q to clear the selection and exit copy mode.
bind-key -T copy-mode-vi Enter send-keys -X copy-selection-no-clear
# Make v start a selection, like in vim.
bind-key -T copy-mode-vi v send-keys -X begin-selection
# By default v enables rectangle-toggle (block selection) but I just re-bound v
# to begin-selection, so bind r to rectangle-toggle instead.
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle
# Make Y copy the entire current line.
bind-key -T copy-mode-vi Y send-keys -X copy-line
# Make / and ? do incremental search in copy mode.
bind-key -T copy-mode-vi / command-prompt -i -p "(search down)" "send -X search-forward-incremental \"%%%\""
bind-key -T copy-mode-vi ? command-prompt -i -p "(search up)" "send -X search-backward-incremental \"%%%\""

# Plugins
# =======
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
# Swap tmux-sensible's `Ctrl-a a` (last-window) and `Ctrl-a Ctrl-a`
# (send-prefix) so that:
# `Ctrl-a Ctrl-a` goes to the last window.
# `Ctrl-a a` sends Ctrl-a into a nested tmux.
bind-key C-b last-window
bind-key b send-prefix
set -g @plugin 'tmux-plugins/tmux-yank'
# Don't clear the selection or exit copy mode after copying with y.
set -g @yank_action 'copy-pipe-no-clear'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-sessionist'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'nhdaly/tmux-better-mouse-mode'
set -g @scroll-without-changing-pane "on"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
